<Blank>:
    Label: 
        center: root.center 
        text: root.label

<Conditional>: 
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points: (self.center_x, self.y, self.x, self.center_y, self.center_x, self.y + self.height, self.x + self.width, self.center_y)
            close: True
    Label: 
        center: root.center 
        text: root.label

<Statement>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            rectangle: (self.x, self.y, self.width, self.height)
    Label: 
        center: root.center 
        text: root.label

<UpArrow>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points:
                (self.x, self.y,
                self.center_x, self.y + self.height,
                self.x + self.width, self.y)

<DownArrow>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points:
                (self.x, self.y + self.height,
                self.center_x, self.y,
                self.x + self.width, self.y + self.height)

<LeftArrow>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points:
                (self.x + self.width, self.y + self.height,
                self.x, self.center_y,
                self.x + self.width, self.y)

<RightArrow>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points:
                (self.x, self.y + self.height,
                self.x + self.width, self.center_y,
                self.x, self.y)

<HorizontalLine>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points: (self.x, self.center_y, self.x + self.width, self.center_y)

<VerticalLine>:
    canvas: 
        Color: 
            rgba: root.line_color
        Line: 
            width: 2.
            points: (self.center_x, self.y, self.center_x, self.y + self.height)

<Connector>:
    VerticalLine:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.line_n else 0)
        x: root.x
        y: root.center_y
        size: (root.width, root.height / 2)
    VerticalLine:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.line_s else 0)
        x: root.x
        y: root.y
        size: (root.width, root.height / 2)
    HorizontalLine:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.line_e else 0)
        x: root.center_x
        y: root.y
        size: (root.width / 2, root.height)
    HorizontalLine:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.line_w else 0)
        x: root.x
        y: root.y
        size: (root.width / 2, root.height)
    UpArrow:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.arrow_n else 0)
        center_x: root.center_x
        y: root.y + root.height - self.height
        size: (16, 8)
    DownArrow:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.arrow_s else 0)
        center_x: root.center_x
        y: root.y
        size: (16, 8)
    RightArrow:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.arrow_e else 0)
        x: root.x + root.width - self.width
        center_y: root.center_y
        size: (8, 16)
    LeftArrow:
        line_color: (root.line_color[0], root.line_color[1], root.line_color[2], 1 if root.arrow_w else 0)
        x: root.x
        center_y: root.center_y
        size: (8, 16)
    Label:
        center: root.center
        text: root.label

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: './'

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: './'
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)

<MainWindow>:

    text_input: text_input

    BoxLayout:
        orientation: "horizontal"
        size: root.width, root.height

        # CP GUI Interface
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: root.width * 0.67, root.height

            Label:
                text: 'Simulator'
                size_hint: None, None
                size: root.width * 0.67, root.height * 0.05

            GridLayout:
                size_hint: None, None
                size: root.width * 0.67, root.height * 0.05
                cols: 26

                Label:
                    text: 'a'
                Label:
                    text: 'b'
                Label:
                    text: 'c'
                Label:
                    text: 'd'
                Label:
                    text: 'e'
                Label:
                    text: 'f'
                Label:
                    text: 'g'
                Label:
                    text: 'h'
                Label:
                    text: 'i'
                Label:
                    text: 'j'
                Label:
                    text: 'k'
                Label:
                    text: 'l'
                Label:
                    text: 'm'
                Label:
                    text: 'n'
                Label:
                    text: 'o'
                Label:
                    text: 'p'
                Label:
                    text: 'q'
                Label:
                    text: 'r'
                Label:
                    text: 's'
                Label:
                    text: 't'
                Label:
                    text: 'u'
                Label:
                    text: 'v'
                Label:
                    text: 'w'
                Label:
                    text: 'x'
                Label:
                    text: 'y'
                Label:
                    text: 'z'

                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False
                TextInput:
                    text: '0'
                    multiline: False

            BoxLayout:
                id: flowchart
                pos_hint: {'x': 0, 'y': .1}
                size_hint: None, None
                size: root.width * 0.67, root.height * 0.8

            BoxLayout:
                orientation: "horizontal"
                size_hint: None, None
                size: root.width * 0.67, root.height * 0.1

                Button:
                    text: 'Draw Flowchart'
                    on_release: root.draw_flowchart()
                Button:
                    text: 'clear flowchart'
                    on_release: root.clear_flowchart()
                Button:
                    text: 'something else'

        # CP Editor
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: root.width * 0.33, root.height

            Label:
                text: 'Editor:'
                size_hint: None, None
                size: root.width * 0.33, root.height * 0.05

            AnchorLayout:
                TextInput:
                    id: text_input
                    text: ''
                    size_hint: .95, .98
                    pos_hint: {'x': 0.025, 'y': 0.025}
                    size: root.width * 0.33, root.height * 0.90

            BoxLayout:
                orientation: "horizontal"
                size_hint : None, None
                size: root.width * 0.33, root.height * 0.1

                AnchorLayout:
                    Button:
                        text: 'Load'
                        size_hint: 0.9, 0.6
                        on_release: root.file_chooser()

                AnchorLayout:
                    Button:
                        text: 'Save'
                        size_hint: 0.9, 0.6
                        on_release: root.file_saver()




